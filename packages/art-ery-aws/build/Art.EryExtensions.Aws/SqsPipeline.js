"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["Pipeline", "Sqs", "JSON"], [global, require('./StandardImport')], (Pipeline, Sqs, JSON) => {let SqsPipeline; return SqsPipeline = Caf.defClass(class SqsPipeline extends Pipeline {}, function(SqsPipeline, classSuper, instanceSuper) {this.abstractClass(); this.getter({sqs: function() {return Sqs.singleton;}}); this.handlers({sendMessage: function({body}) {return this.sqs.sendMessage({queue: this.tableName, body: JSON.stringify(body)});}, receiveMessage: function({data}) {let visibilityTimeout, wait; visibilityTimeout = data.visibilityTimeout; wait = data.wait; return this.sqs.receiveMessage({queue: this.tableName}, {visibilityTimeout, wait, limit: 1}).then((messages) => messages[0]);}, receiveMessages: function({data}) {let limit, visibilityTimeout, wait, temp; limit = (undefined !== (temp = data.limit)) ? temp : 10; visibilityTimeout = data.visibilityTimeout; wait = data.wait; return this.sqs.receiveMessage({queue: this.tableName}, {limit, visibilityTimeout, wait});}, deleteMessage: function({key}) {return this.sqs.deleteMessage({queue: this.tableName, receiptHandle: key});}});});});});
//# sourceMappingURL=SqsPipeline.js.map
