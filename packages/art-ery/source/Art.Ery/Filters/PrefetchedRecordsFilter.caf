import &StandardImport

class PrefetchedRecordsFilter extends Filter
  @location :client

  constructor: (options) ->
    @expirationSeconds = options?.expirationSeconds ? 1

  @after
    all: (response) ->
      if response.props extract dataUpdates
        response.pipeline.prefetchedRecordsCache.addPrefetchedRecords dataUpdates, @expirationSeconds
      response