"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["Filter", "getLinkedFieldFilterForPipeline", "Array", "Object", "mergeWithoutNulls", "vivifyObjectPathAndSet"], [global, require('../StandardImport'), require('./LinkFieldsFilter2')], (Filter, getLinkedFieldFilterForPipeline, Array, Object, mergeWithoutNulls, vivifyObjectPathAndSet) => {let LinkFieldsFilter2LegacyApiDecode; return LinkFieldsFilter2LegacyApiDecode = Caf.defClass(class LinkFieldsFilter2LegacyApiDecode extends Filter {}, function(LinkFieldsFilter2LegacyApiDecode, classSuper, instanceSuper) {let legacyDecode, legacyDecodeB; this.location("client"); this.after({all: function(response) {let dataUpdates; return response.withMergedProps({data: legacyDecode(response.pipeline, dataUpdates = {}, response.data), dataUpdates});}}); legacyDecode = function(pipeline, dataUpdates, data) {let linkFields; return (linkFields = getLinkedFieldFilterForPipeline(pipeline).linkFields) ? (() => {switch (false) {case !(Caf.is(data, Array)): return Caf.array(data, (record) => legacyDecodeB(pipeline, linkFields, dataUpdates, record)); case !(Caf.is(data, Object)): return legacyDecodeB(pipeline, linkFields, dataUpdates, data); default: return data;};})() : data;}; legacyDecodeB = function(pipeline, linkFields, dataUpdates, record) {return mergeWithoutNulls(record, Caf.object(linkFields, ({idFieldName, pipelineName}, fieldName) => {let inlineRecord; inlineRecord = record[fieldName]; vivifyObjectPathAndSet(dataUpdates, pipelineName, inlineRecord.id, inlineRecord); legacyDecode(pipeline.pipelines[pipelineName], dataUpdates, inlineRecord); return null;}, ({idFieldName, pipelineName}, fieldName) => record[fieldName]));};});});});
//# sourceMappingURL=LinkFieldsFilter2LegacyApiDecode.js.map
