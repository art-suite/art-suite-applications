"use strict"
let Caf = require('caffeine-script-runtime');
Caf.defMod(module, () => {return Caf.importInvoke(["describe", "test", "Pipeline", "assert"], [global, require('./StandardImport')], (describe, test, Pipeline, assert) => {return describe("filters", function() {test("basic before filter", () => {let MyPipeline; return (MyPipeline = Caf.defClass(class MyPipeline extends Pipeline {}, function(MyPipeline, classSuper, instanceSuper) {this.handlers({hello: function({key}) {return `Hello, ${Caf.toString(key)}.`;}}); this.filters({name: "myPrefixKeyFilter", before: {hello: function(request) {return request.withKey(`before-${Caf.toString(request.key)}`);}}});})).myPipeline.hello("George").then((result) => assert.eq(result, "Hello, before-George."));}); return test("basic after filter", () => {let MyPipeline; return (MyPipeline = Caf.defClass(class MyPipeline extends Pipeline {}, function(MyPipeline, classSuper, instanceSuper) {this.handlers({hello: function({key}) {return `Hello, ${Caf.toString(key)}.`;}}); this.filter({after: {hello: function(response) {return response.withData(`${Caf.toString(response.data)}-after`);}}});})).myPipeline.hello("George").then((result) => assert.eq(result, "Hello, George.-after"));});});});});
//# sourceMappingURL=Filter.test.js.map
